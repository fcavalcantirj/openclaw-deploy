{
  "category": "monitoring",
  "description": "Set up health monitoring and alerting for the OpenClaw instance",
  "steps": [
    "Load instance metadata from instances/{name}/metadata.json",
    "Create scripts directory on VM: `ssh openclaw@{ip} 'mkdir -p ~/scripts ~/logs'`",
    "Upload healthcheck script: `scp scripts/healthcheck.sh openclaw@{ip}:~/scripts/`",
    "Make executable: `ssh openclaw@{ip} 'chmod +x ~/scripts/healthcheck.sh'`",
    "Create systemd user directory: `ssh openclaw@{ip} 'mkdir -p ~/.config/systemd/user'`",
    "Create healthcheck.service unit file on VM",
    "Create healthcheck.timer unit file (5 minute interval)",
    "Enable timer: `ssh openclaw@{ip} 'systemctl --user daemon-reload && systemctl --user enable --now openclaw-healthcheck.timer'`",
    "Verify timer active: `ssh openclaw@{ip} 'systemctl --user list-timers'`",
    "Create logrotate config: `ssh root@{ip}` to write /etc/logrotate.d/openclaw",
    "Test healthcheck manually: `ssh openclaw@{ip} '~/scripts/healthcheck.sh'`",
    "Verify log created: `ssh openclaw@{ip} 'cat ~/logs/healthcheck.log'`",
    "Update metadata.json: monitoring_status=active, healthcheck_interval=5m"
  ],
  "passes": false,
  "prerequisite": "05-run-claude-code",
  "inputs": ["instance_name"],
  "outputs": ["Healthcheck script installed", "Systemd timer active", "Log rotation configured"]
}
