{
  "category": "channels",
  "description": "Configure Telegram bot for the OpenClaw instance",
  "steps": [
    "Load instance metadata from instances/{name}/metadata.json",
    "Ask user for Telegram bot token: 'Please provide the Telegram bot token from @BotFather'",
    "Validate token format: should match /^[0-9]+:[A-Za-z0-9_-]+$/",
    "Test bot token: `curl https://api.telegram.org/bot{token}/getMe`",
    "If invalid: report error, ask for correct token",
    "Update OpenClaw config on VM via SSH:",
    "  - Read current config: `ssh openclaw@{ip} 'cat ~/.openclaw/openclaw.json'`",
    "  - Merge telegram.botToken into config",
    "  - Write updated config: `ssh openclaw@{ip} 'cat > ~/.openclaw/openclaw.json'`",
    "Restart OpenClaw Gateway: `ssh openclaw@{ip} 'openclaw gateway restart'`",
    "Wait 5 seconds for restart",
    "Verify Telegram channel ready: `ssh openclaw@{ip} 'openclaw channels status'`",
    "Instruct user: 'Message your bot on Telegram to get a pairing code'",
    "Wait for pairing code: poll `ssh openclaw@{ip} 'openclaw pairing list telegram'`",
    "Once user reports code: `ssh openclaw@{ip} 'openclaw pairing approve telegram {code}'`",
    "Verify pairing: check channels status shows telegram connected",
    "Update metadata.json: telegram_bot={bot_username}, telegram_status=paired"
  ],
  "passes": false,
  "prerequisite": "05-run-claude-code",
  "inputs": ["instance_name", "telegram_bot_token"],
  "outputs": ["Telegram bot configured", "User paired with bot"]
}
